<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Star Type Classifier</title>
    <style>
        :root {
            --primary: #7fffd4;
            --secondary: #4fd1ff;
            --accent: #ffdd57;
            --bg-dark: #020617;
            --card-bg: rgba(15, 23, 42, 0.92);
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            min-height: 100vh;
            font-family: "Segoe UI", Arial, sans-serif;
            color: #e5e7eb;
            padding: 20px;
            background-color: var(--bg-dark);
            background-image: url("/static/giant-stars-4k-space-q03wbnsie2ul47hh.jpg");
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            position: relative;
            overflow-y: auto; /* allow vertical scroll */
        }

        body::before {
            content: "";
            position: fixed;
            inset: 0;
            background: radial-gradient(circle at 20% 20%, rgba(255,255,255,0.15) 0, transparent 50%),
                        radial-gradient(circle at 80% 80%, rgba(148,163,184,0.2) 0, transparent 55%);
            mix-blend-mode: screen;
            opacity: 0.45;
            pointer-events: none;
            animation: drift 30s linear infinite alternate;
        }

        @keyframes drift {
            from { transform: translate3d(0, 0, 0); }
            to   { transform: translate3d(-30px, -40px, 0); }
        }

        .shell {
            width: 100%;
            max-width: 900px;
            position: relative;
            z-index: 1;
        }

        .nav {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
            padding: 8px 14px;
            border-radius: 999px;
            background: rgba(15, 23, 42, 0.92);
            border: 1px solid rgba(148, 163, 184, 0.45);
            backdrop-filter: blur(14px);
            box-shadow: 0 0 18px rgba(15, 23, 42, 0.8);
        }

        .nav-title {
            font-size: 0.95rem;
            letter-spacing: 0.12em;
            text-transform: uppercase;
            color: var(--primary);
        }

        .nav-links a {
            font-size: 0.85rem;
            color: #cbd5f5;
            text-decoration: none;
            margin-left: 14px;
            padding-bottom: 2px;
            border-bottom: 2px solid transparent;
            transition: color 0.15s ease, border-color 0.15s ease, transform 0.1s ease;
        }

        .nav-links a:hover {
            color: var(--accent);
            border-color: var(--accent);
            transform: translateY(-1px);
        }

        .nav-links a.active {
            color: var(--secondary);
            border-color: var(--secondary);
        }

        .container {
            background: var(--card-bg);
            border-radius: 18px;
            padding: 26px 24px 22px;
            box-shadow:
                0 0 25px rgba(15, 23, 42, 0.9),
                0 0 60px rgba(56, 189, 248, 0.25);
            backdrop-filter: blur(14px);
            border: 1px solid rgba(148, 163, 184, 0.4);
            position: relative;
            overflow: hidden;
        }

        .container::before {
            content: "";
            position: absolute;
            inset: -2px;
            border-radius: inherit;
            background: conic-gradient(
                from 180deg,
                rgba(56,189,248,0.0),
                rgba(56,189,248,0.8),
                rgba(129,140,248,0.8),
                rgba(56,189,248,0.0)
            );
            opacity: 0.35;
            filter: blur(6px);
            z-index: -1;
            animation: rotateGlow 18s linear infinite;
        }

        @keyframes rotateGlow {
            to { transform: rotate(360deg); }
        }

        h1 {
            text-align: center;
            margin: 0 0 8px;
            font-size: 1.9rem;
            letter-spacing: 0.08em;
            text-transform: uppercase;
            color: var(--primary);
            text-shadow: 0 0 12px rgba(34,197,235,0.75);
        }

        .subtitle {
            text-align: center;
            font-size: 0.9rem;
            color: #9ca3af;
            margin-bottom: 18px;
        }

        .intro {
            font-size: 0.9rem;
            line-height: 1.6;
            color: #d1d5db;
            background: rgba(15, 23, 42, 0.8);
            padding: 12px 14px;
            border-radius: 10px;
            border: 1px solid rgba(148, 163, 184, 0.35);
            margin-bottom: 18px;
        }

        .intro strong {
            color: var(--accent);
        }

        form {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 14px 18px;
            margin-bottom: 14px;
        }

        .field {
            display: flex;
            flex-direction: column;
            font-size: 0.85rem;
        }

        label {
            margin-bottom: 4px;
            color: #cbd5f5;
        }

        input {
            border-radius: 8px;
            border: 1px solid rgba(148, 163, 184, 0.6);
            padding: 7px 9px;
            background: rgba(15, 23, 42, 0.9);
            color: #e5e7eb;
            font-size: 0.9rem;
        }

        input:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.6);
        }

        .actions {
            grid-column: 1 / -1;
            display: flex;
            justify-content: center;
            margin-top: 4px;
        }

        button {
            border: none;
            border-radius: 999px;
            padding: 9px 26px;
            cursor: pointer;
            font-weight: 600;
            letter-spacing: 0.06em;
            text-transform: uppercase;
            font-size: 0.85rem;
            color: #0f172a;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            box-shadow:
                0 0 18px rgba(56,189,248,0.6),
                0 0 6px rgba(15,23,42,0.9);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow:
                0 0 24px rgba(56,189,248,0.8),
                0 4px 12px rgba(15,23,42,0.9);
        }

        .result {
            margin-top: 8px;
            padding: 10px 12px;
            background-color: rgba(15, 23, 42, 0.95);
            border-radius: 10px;
            border: 1px solid rgba(56, 189, 248, 0.5);
            min-height: 40px;
            font-size: 0.9rem;
            white-space: pre-line;
        }

        .result.highlight {
            animation: pulseGlow 1.2s ease-out;
        }

        @keyframes pulseGlow {
            0% { box-shadow: 0 0 0 rgba(56,189,248,0.0); }
            50% { box-shadow: 0 0 18px rgba(56,189,248,0.9); }
            100% { box-shadow: 0 0 6px rgba(56,189,248,0.4); }
        }

        .error {
            color: #fed7d7;
            border-color: #f97373;
        }

        @media (max-width: 640px) {
            .container {
                padding: 20px 16px 16px;
            }
            form {
                grid-template-columns: 1fr;
            }
            .nav {
                flex-direction: column;
                align-items: flex-start;
                gap: 6px;
            }
        }
    .page-wrapper {
    max-width: 900px;
    margin: 0 auto;
    }
    </style>
</head>
<body>
    <div class="page-wrapper">

        <div class="shell">
            <nav class="nav">
            <div class="nav-title">Star Classifier</div>
            <div class="nav-links">
                <a href="/" class="active">Predict</a>
                <a href="/model">Model & Features</a>
                <a href="/stars">Stars & Types</a>
                <a href="/exoplanet">Exoplanet Mass</a>
                <a href="/exoplanet_mass_info">Exoplanet Mass Info</a>
                <a href="/exoplanet_model_info">Exoplanet Model</a>
                <a href="/diagrams">Diagrams</a>
            </div>
        </nav>

        <div class="container">
            <h1>Star Type Classifier</h1>
            <div class="subtitle">Interactive prediction using stellar physics</div>

            <div class="intro">
                This interface connects to a trained <strong>machine learning model</strong> that receives four
                physical properties of a star—temperature, luminosity, radius, and absolute magnitude—and predicts
                the most likely <strong>stellar class</strong>. The model has already been evaluated on a test set,
                and the metrics shown below each prediction summarize how well it distinguishes between the six
                star types in the dataset. By varying the inputs, you can explore how small changes in temperature
                or brightness can move a star from one region of the Hertzsprung–Russell diagram to another and
                change the class the model assigns.
            </div>

            <form id="star-form">
                <div class="field">
                    <label for="temperature">Temperature (K)</label>
                    <input type="number" id="temperature" step="0.01" required>
                </div>

                <div class="field">
                    <label for="luminosity">Luminosity (L/Lo)</label>
                    <input type="number" id="luminosity" step="0.00001" required>
                </div>

                <div class="field">
                    <label for="radius">Radius (R/Ro)</label>
                    <input type="number" id="radius" step="0.00001" required>
                </div>

                <div class="field">
                    <label for="absolute_magnitude">Absolute magnitude (Mv)</label>
                    <input type="number" id="absolute_magnitude" step="0.01" required>
                </div>
                
                <div class="actions">
                    <button type="submit">Predict Star Type</button>
                </div>
            </form>

            <div id="result" class="result"></div>
        </div>
    </div>
</div>

    <script>
        const form = document.getElementById('star-form');
        const resultDiv = document.getElementById('result');

        form.addEventListener('submit', async (event) => {
            event.preventDefault();
            resultDiv.textContent = "Predicting...";
            resultDiv.classList.remove('error', 'highlight');
            
            const payload = {
                temperature: parseFloat(document.getElementById('temperature').value),
                luminosity: parseFloat(document.getElementById('luminosity').value),
                radius: parseFloat(document.getElementById('radius').value),
                absolute_magnitude: parseFloat(document.getElementById('absolute_magnitude').value)
            };

            try {
                const response = await fetch('/predict', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    const errData = await response.json();
                    resultDiv.textContent = "Error: " + (errData.error || response.statusText);
                    resultDiv.classList.add('error');
                    return;
                }

                const data = await response.json();
                let text = `Predicted star type: ${data.star_type} (code: ${data.star_type_code})`;
                if (data.confidence !== undefined) {
                    text += `\nConfidence: ${(data.confidence * 100).toFixed(2)}%`;
                }
                if (data.metrics) {
                    text += `\nOverall accuracy: ${(data.metrics.overall_accuracy * 100).toFixed(2)}%`;
                    if (data.metrics.class_precision !== null) {
                        text += `\nClass precision: ${(data.metrics.class_precision * 100).toFixed(2)}%`;
                        text += `\nClass recall: ${(data.metrics.class_recall * 100).toFixed(2)}%`;
                        text += `\nClass F1-score: ${(data.metrics.class_f1 * 100).toFixed(2)}%`;
                    }
                }
                resultDiv.textContent = text;
                resultDiv.classList.add('highlight');

            } catch (error) {
                resultDiv.textContent = "Error: " + error.message;
                resultDiv.classList.add('error');
            }
        });
        </script>
</body>
</html>